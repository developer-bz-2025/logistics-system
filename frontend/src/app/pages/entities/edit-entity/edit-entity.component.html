<div *ngIf="open" class="fixed inset-0 z-50 flex items-center justify-center">
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black/40" (click)="onCancel()"></div>


    <!-- Panel -->
    <div class="relative bg-white w-full max-w-lg mx-4 rounded-2xl shadow-xl p-20">
        <div class="flex items-start justify-between mb-4">
            <div>
                <h2 class="text-xl font-semibold text-gray-800">Edit Entity</h2>
                <p class="text-sm text-gray-500">Update name and description</p>
            </div>
            <button (click)="onCancel()" class="p-2 rounded-lg hover:bg-gray-100">âœ•</button>
        </div>


        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-5">
            <div>
                <label class="block font-medium text-gray-700 mb-1">Entity Name</label>
                <input type="text" formControlName="entity_name"
                    class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-600"
                    placeholder="Enter entity name" />
                <div class="text-sm text-red-600 mt-1"
                    *ngIf="form.get('entity_name')?.touched && form.get('entity_name')?.invalid">
                    Name is required.
                </div>
            </div>


            <div>
                <label class="block font-medium text-gray-700 mb-1">Description</label>
                <textarea rows="3" formControlName="entity_description"
                    class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-600"
                    placeholder="Brief description of the entity"></textarea>
            </div>


            <div *ngIf="errorMessage" class="text-red-600">{{ errorMessage }}</div>


            <div class="flex justify-end gap-3 pt-4 border-t">
                <button type="button" (click)="onCancel()"
                    class="border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-100">
                    Cancel
                </button>
                <button type="submit" [disabled]="form.invalid || loading || !form.dirty"
                    class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-60">
                    <ng-container *ngIf="loading; else saveText">Saving...</ng-container>
                    <ng-template #saveText>Save changes</ng-template>
                </button>
            </div>
        </form>
    </div>
</div>